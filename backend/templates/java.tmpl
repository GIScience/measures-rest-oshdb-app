package org.giscience.measures.repository;

import org.giscience.measures.rest.measure.MeasureOSHDB;
import org.giscience.utils.geogrid.cells.GridCell;
import org.heigit.bigspatialdata.oshdb.api.db.OSHDBDatabase;
import org.heigit.bigspatialdata.oshdb.api.db.OSHDBJdbc;
import org.heigit.bigspatialdata.oshdb.api.mapreducer.MapReducer;
import org.heigit.bigspatialdata.oshdb.api.object.OSMEntitySnapshot;
import org.heigit.bigspatialdata.oshdb.util.geometry.Geo;

import javax.ws.rs.Path;
import java.util.SortedMap;

{{imports}}

@Path("api/" + {{className}}.name)
public class {{className}} extends MeasureOSHDB<Number, OSMEntitySnapshot> {
    public static final String name = "{{id}}";

    public {{className}}(OSHDBJdbc oshdb) {
        super(oshdb);
    }

    public {{className}}(OSHDBDatabase oshdb, OSHDBJdbc oshdb_keydb) {
        super(oshdb, oshdb_keydb);
    }

    @Override
    public SortedMap<GridCell, Number> compute(MapReducer<OSMEntitySnapshot> mapReducer) throws Exception {
      {{code}}
    }
}
